try{console.log("Hello Ease.")}catch(e$$5){window.console={};for(var cMethods="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=0;i<cMethods.length;i++)console[cMethods[i]]=function(){}}
function prettyDate(b){var b=new Date((b||"").replace(/-/g,"/").replace(/[TZ]/g," ")),b=((new Date).getTime()-b.getTime()+b.getTimezoneOffset()*6E4)/1E3,a=Math.floor(b/86400);return isNaN(a)||a<0||a>=31?void 0:a==0&&(b<2&&"just now"||b<60&&~~b+" seconds ago"||b<120&&"1 minute ago"||b<3600&&Math.floor(b/60)+" minutes ago"||b<7200&&"1 hour ago"||b<86400&&Math.floor(b/3600)+" hours ago")||a==1&&"Yesterday"||a<7&&a+" days ago"||a<31&&Math.ceil(a/7)+" weeks ago"}var Ease=Ease||{};
(function(b){Ease.Events={BLURB_ADDED:"blurbAdded"};Ease.Boxfish=function(a){this.settings={url:"http://api.staging.boxfish.com/v1/demo/codetest/?callback=?",cont:"#widget-container",maxBlurbs:10};b.extend(this.settings,a);this.$cont=b(this.settings.cont);this.$content=this.$cont.find(".content");if(!this.$content.length)return!1;this.requests=[];this.blurbs=[];this.loading=!0;this.init()};Ease.Boxfish.prototype={init:function(){var a=this;this.$cont.bind(Ease.Events.BLURB_ADDED,function(){a.onAddBlurb()});
this.requestData()},random:function(a){return~~(Math.random()*a)},requestData:function(){var a=this;this.requests.push(b.ajax({url:this.settings.url,dataType:"jsonp",jsonp:"success",data:{wait:this.loading?this.random(2):this.random(30)},success:function(b,d,e){a.onRequestSuccess.apply(a,arguments)}}).always(function(b,d,e){a.onRequestFinished.apply(a,arguments)}))},onRequestSuccess:function(a){this.blurbs.push(new Ease.Boxfish.Blurb(this,a,{cont:this.$content}))},onRequestFinished:function(a,c,d){a=
b.inArray(d,this.requests);a>-1&&this.requests.splice(a,1);this.requestData()},onAddBlurb:function(){if(this.loading)this.loading=!1,this.$cont.addClass("boxfish-loaded");this.blurbs.length>this.settings.maxBlurbs&&this.blurbs.shift().destroy();b.each(this.blurbs,function(){this.updateTime()})}};Ease.Boxfish.Blurb=function(a,c,d){this.data=c;this.superclass=a;this.settings={blurbClass:"blurb",metaClass:"meta",contentClass:"blurb-content",detailsClass:"details",animateTime:250};b.extend(this.settings,
d);this.init()};Ease.Boxfish.Blurb.prototype={init:function(){var a=this;this.$blurb=this.makeBlurb().hide().prependTo(this.settings.cont).slideDown(this.settings.animateTime,function(){a.superclass.$cont.triggerHandler(Ease.Events.BLURB_ADDED)})},makeBlurb:function(){var a=b("<div />",{}).addClass(this.settings.blurbClass),c=b("<div />",{}).addClass(this.settings.metaClass).appendTo(a);this.makeThumbnail().appendTo(c);this.makeDate().appendTo(c);c=b("<div />",{}).addClass(this.settings.contentClass).appendTo(a);
this.makeTitle().appendTo(c);this.makeDetails().appendTo(c);return a},makeTitle:function(){return b("<h2 />",{html:"<strong>"+this.data.channel+"</strong> - "+this.data.program})},makeDetails:function(){var a=b("<div />",{html:this.data.text}).addClass(this.settings.detailsClass);a.find("em").click(function(){window.open("http://beta.boxfish.com/#search/"+b(this).text())});return a},makeThumbnail:function(){var a=new Image;a.onerror=function(){b(this).remove()};a.src=this.data.thumbnail;return b("<div />",
{html:a}).addClass("pic")},makeDate:function(){var a=this.getTime();return this.$time=b("<span />",{text:a}).addClass("time")},getTime:function(){var a=prettyDate(this.data.time);return a=a?a:this.data.time},updateTime:function(){this.$time.text(this.getTime())},destroy:function(){this.$blurb.remove()}}})(jQuery);(function(b){b(document).ready(function(){new Ease.Boxfish({})})})(jQuery);
